Node:
(type) c
(layer)0
	Element:body
			Node:
			(type) h1
			(layer)1
				Element:h1
					Color Background Placeholders for Loading Images
			Node:
			(type) c
			(layer)1
				Element:hr
					When loading images, best practice is to show a placeholder instead of a broken image. A great place to see this in action is on Pinterest. They achieve this by showing the dominant color of the image as the background placeholder, only showing the image when it has been loaded. [block:image] { "images": [ { "image": [ "https://files.readme.io/CfJlAogoTIiaZka74hqW_pinterest_loading.gif", "pinterest_loading.gif", "500", "500", "#ecebec", "" ] } ] } [/block] Our goal is to recreate this effect using Embedly's API. Below is a demo utilizing Extract and Display to recreate this image loading technique. [block:embed] { "html": "<iframe class=\"embedly-embed\" src=\"//cdn.embedly.com/widgets/media.html?url=https%3A%2F%2Fjsfiddle.net%2Fo4v70f7f%2F1%2F%3Fheight%3D550%26tabs%3Dresult%2Cjs%2Chtml%2Ccss&src=https%3A%2F%2Fjsfiddle.net%2Fo4v70f7f%2F1%2Fembedded%2Fresult%2Cjs%2Chtml%2Ccss%2F&type=text%2Fhtml&key=02466f963b9b4bb8845a05b53d3235d7&schema=jsfiddle\" width=\"600\" height=\"550\" scrolling=\"no\" frameborder=\"0\" allowfullscreen></iframe>", "url": "https://jsfiddle.net/o4v70f7f/1/?height=550&tabs=result,js,html,css", "title": "Edit fiddle - JSFiddle", "favicon": "https://jsfiddle.net/favicon.png" } [/block] [block:code] { "codes": [ { "code": "function rgbToHex(r, g, b) {\n return \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n}\n\nfunction displayImage(img, color, provider) {\n\n var width = 400,\n height = Math.ceil(img.height * (width / img.width));\n\n // Add the block to the results section.\n $('.results').html(\n '<div class=\"background-wrapper\"><div id=\"backgroundBlock\"><span>' +\n provider + '</span></div></div>');\n\n // Create a wrapper.\n $('.background-wrapper').css({\n width: width + 20,\n height: height + 20\n });\n // Build the actually placeholder.\n $('#backgroundBlock').css({\n background: color,\n width: width,\n height: height\n });\n // Center the text.\n $('#backgroundBlock span').css('padding-top', Math.floor(height / 2) - 10);\n\n // Animate the fade in.\n $('.background-wrapper').animate({\n opacity: 1\n }, 500);\n\n // Use Embedly display to resize the image, we add a timestamp in the demo o\n var src = $.embedly.display.resize(img.url, {\n query: {\n width: width,\n height: height\n },\n key: $.embedly.defaults.key\n }) +\n '&_' + Math.floor(Math.random() * 1000);\n\n // Create the img element\n var elem = document.createElement('img');\n\n // Set up the onload handler.\n var loaded = false;\n var handler = function() {\n if (loaded) {\n return;\n }\n loaded = true;\n // Fade the image into view.\n $('#backgroundBlock img').animate({\n opacity: 1\n }, 1000);\n };\n\n // Add the attributes to the image.\n elem.onload = handler;\n elem.src = src;\n elem.style.display = 'block';\n // Place the image in the correct ID.\n document.getElementById('backgroundBlock').appendChild(elem);\n\n // If the image is already in the browsers cache call the handler.\n if (elem.complete) {\n handler();\n }\n};\n\n$('.collapse .button').on('click', function() {\n // Grab the input.\n var url = $('input').val();\n // Make the call to Embedly Extract\n $.embedly.extract(url)\n .progress(function(obj) {\n // Grab images and create the colors.\n var img = obj.images[0],\n hex = rgbToHex(img.colors[0].color[0], img.colors[0].color[1], img.colors[0].color[2]);\n // Display the image inline.\n displayImage(img, hex, obj.provider_display);\n });\n});", "language": "javascript" }, { "code": ".background-wrapper {\n margin: 0 auto;\n}\n\n#backgroundBlock {\n position: relative;\n}\n\n#backgroundBlock span {\n color: #fff;\n font-weight: bold;\n margin: 0 auto;\n text-align: center;\n display: block;\n}\n\n#backgroundBlock img {\n position: absolute;\n top: 0;\n left: 0;\n opacity: 0;\n}", "language": "css" } ] } [/block]
			Node:
			(type) c
			(layer)1
				Element:footer
