Node:
(type) c
(layer)0
	Element:body
			Node:
			(type) h1
			(layer)1
				Element:h1
					POST - Create
			Node:
			(type) c
			(layer)1
						Node:
						(type) c
						(layer)2
							Element:h2
							Element:a
								Request structure
						Node:
						(type) c
						(layer)2
							Element:p
								The create endpoint allows you to
							Element:strong
								create push campaigns
								and target all your userbase, your own segments
							Element:em
								(attributes, events)
								or to segments generated by Batch
							Element:em
								(country/language, dormant users, app version, etc)
								.
						Node:
						(type) c
						(layer)2
									Node:
									(type) c
									(layer)3
										Element:h3
										Element:a
											Route
									Node:
									(type) c
									(layer)3
										Element:p
											The campaigns API exposes a POST create endpoint at:
										Element:code
											https://api.batch.com/1.1/BATCH_API_KEY/campaigns/create
									Node:
									(type) c
									(layer)3
										Element:p
											Here is an example of a valid CURL CLI request syntax:
									Node:
									(type) c
									(layer)3
										Element:pre
										Element:code
											curl -H "Content-Type: application/json" -H "X-Authorization: BATCH_REST_API_KEY" -X POST -d "@payload.json" "https://api.batch.com/1.1/BATCH_API_KEY/campaigns/create"
									Node:
									(type) c
									(layer)3
										Element:p
											The
										Element:code
											BATCH_API_KEY
											value is either your
										Element:strong
											Live
											or
										Element:strong
											Dev
											Batch API key from the settings page of your app within the dashboard
										Element:em
											(Settings â†’ General)
											. The API key changes push behaviour:
									Node:
									(type) c
									(layer)3
										Element:ul
										Element:li
										Element:strong
											Dev API
											: Only apps built with the Dev API Key will receive notifications.
										Element:li
										Element:strong
											Live API
											: Depending on the targeting you set for your campaigns, apps built with the Live API key will receive notifications. Apps built with the Dev API key will receive all the notifications you send.
						Node:
						(type) c
						(layer)2
									Node:
									(type) c
									(layer)3
										Element:h3
										Element:a
											Headers
									Node:
									(type) c
									(layer)3
										Element:p
											In order to authenticate with the API, you need to provide your
										Element:strong
											company REST API Key
											as the value of the
										Element:code
											X-Authorization
											header.
						Node:
						(type) c
						(layer)2
									Node:
									(type) c
									(layer)3
										Element:h3
										Element:a
											Post data
									Node:
									(type) c
									(layer)3
										Element:p
											The body of the request must contain a
										Element:strong
											valid JSON payload
											with all the parameters you chose to add for your campaign: campaign name, schedule, recurrency, targeting, messages and more.
									Node:
									(type) c
									(layer)3
										Element:p
											Here is how a minimal and valid JSON payload looks like:
									Node:
									(type) c
									(layer)3
										Element:pre
										Element:code
											{ "name": "Test Campaign", "push_time": "now", "live": true, "messages": [ { "language": "en", "title": "Hello!", "body": "How's it going?" } ] }
									Node:
									(type) c
									(layer)3
										Element:blockquote
										Element:p
										Element:strong
											REQUIRED
										Element:br
											Check out the
										Element:a
											list of available parameters
											to create your first push campaign with the API.
			Node:
			(type) c
			(layer)1
						Node:
						(type) c
						(layer)2
							Element:h2
							Element:a
								Responses
						Node:
						(type) c
						(layer)2
									Node:
									(type) c
									(layer)3
										Element:h3
										Element:a
											Success
									Node:
									(type) c
									(layer)3
										Element:p
											If the POST to the API endpoint is successfull you will receive an
										Element:strong
											HTTP 201
											confirmation and
										Element:strong
											a token
											containing an MD5 hash of the successful campaign creation:
									Node:
									(type) c
									(layer)3
										Element:pre
										Element:code
											{"campaign_token":"a0082dc6860938a26280bd3ba927303b"}
									Node:
									(type) c
									(layer)3
										Element:p
											Once you get your token, you can use it to
										Element:a
											update
											your campaign or
										Element:a
											check the stats
											with the API.
									Node:
									(type) c
									(layer)3
										Element:blockquote
										Element:p
											If you don't receive the notification after a successful POST, make sure your app is not opened in the foreground
										Element:em
											(iOS)
											and check again your integration.
						Node:
						(type) c
						(layer)2
									Node:
									(type) c
									(layer)3
										Element:h3
										Element:a
											Failure
									Node:
									(type) c
									(layer)3
										Element:p
											If the POST data does not meet the API requirements you will receive an actionable error message. Contact us at
										Element:a
											support@batch.com
											if you need further support.
									Node:
									(type) c
									(layer)3
										Element:ul
										Element:li
										Element:code
											AUTHENTICATION_INVALID
											(Http status code: 401, Error code: 10)
										Element:li
										Element:code
											ROUTE_NOT_FOUND
											(Http status code: 404, Error code: 20)
										Element:li
										Element:code
											MISSING_PARAMETER
											(Http status code: 400, Error code: 30)
										Element:li
										Element:code
											MALFORMED_PARAMETER
											(Http status code: 400, Error code: 31)
										Element:li
										Element:code
											MALFORMED_JSON_BODY
											(Http status code: 400, Error code: 32)
										Element:li
										Element:code
											SERVER_ERROR
											(Http status code: 500, Error code: 1)
										Element:li
										Element:code
											MAINTENANCE_ERROR
											(Http status code: 503, Error code: 2)
									Node:
									(type) c
									(layer)3
										Element:p
										Element:a
										Element:span
											Next step
										Element:span
											Updating a campaign
