Node:
(type) c
(layer)0
	Element:body
			Node:
			(type) h1
			(layer)1
				Element:h1
					Delivery reports on Notify URL
					Receive a Delivery reports and custom data on your callback server's Notify URL.
			Node:
			(type) c
			(layer)1
				Element:hr
					Unlike the [Getting delivery reports](doc:sms-delivery-reports) API method, where the reports are pulled and received in the response, you are able to set a **Notify URL** on your callback server on which we will push the delivery reports. Notify URL is set as one of the parameters of the [Fully featured textual message](doc:fully-featured-textual-message) API method. As soon as delivery reports for sent messages are received in the Infobip system, they will be forwarded to specified Notify URL on your callback server. Besides the Notify URL, you can also specify a **notify content type** for delivery reports. Supported content types: - **`application/json`** - **`application/xml`** For every sent message you can set customized [bulk id and message id](doc:bulk-id-and-message-id) so each delivery report pushed on the Notify URL will have the same `messageId` and `bulkId` attributes as the message for which it is being sent. If you don't use customized `messageId` and `bulkId`, these attributes of pushed delivery reports will be generated by the Infobip system. Apart from custom [bulk id and message id](doc:bulk-id-and-message-id) that can identify sent messages, you are able to set a **`callbackData`** as an additional, user defined data that will be sent on the Notify URL. Callback data is also set as one of the parameters of the [Fully featured textual message](doc:fully-featured-textual-message) API method. The example bellow shows how to set `notifyURL`, `notifyContentType` for delivery report and the user's `callbackData`. [block:code] { "codes": [ { "code": "POST /sms/1/text/advanced HTTP/1.1\nHost: api.infobip.com\nAuthorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==\nContent-Type: application/json\n\n{\n \"bulkId\":\"BULK-ID-123-xyz\",\n \"messages\":[\n {\n \"from\":\"InfoSMS\",\n \"destinations\":[\n {\n \"to\":\"41793026727\",\n \"messageId\":\"MESSAGE-ID-123-xyz\"\n },\n {\n \"to\":\"41793026731\"\n }\n ],\n \"text\":\"Mama always said life was like a box of chocolates. You never know what you're gonna get.\",\n \"notifyUrl\":\"http://www.example.com/sms/advanced\",\n \"notifyContentType\":\"application/json\",\n \"callbackData\":\"There's no place like home.\"\n }\n\t\t]\n}", "language": "json" } ] } [/block] The results you will receive on your Notify URL will be the same as [Getting delivery reports](doc:sms-delivery-reports) over API method, except XML root element name which is same for all reports - `<reportResponse>`. [block:code] { "codes": [ { "code": "{\n \"results\": [\n {\n \"bulkId\": \"BULK-ID-123-xyz\",\n \"messageId\": \"c9823180-94d4-4ea0-9bf3-ec907e7534a6\",\n \"to\": \"41793026731\",\n \"sentAt\": \"2015-06-04T13:01:52.933+0000\",\n \"doneAt\": \"2015-06-04T13:02:00.134+0000\",\n \"smsCount\": 1,\n \"price\": {\n \"pricePerMessage\": 0.0001000000,\n \"currency\": \"EUR\"\n },\n \"status\": {\n \"groupId\": 3,\n \"groupName\": \"DELIVERED\",\n \"id\": 5,\n \"name\": \"DELIVERED_TO_HANDSET\",\n \"description\": \"Message delivered to handset\"\n },\n \"error\": {\n \"groupId\": 0,\n \"groupName\": \"OK\",\n \"id\": 0,\n \"name\": \"NO_ERROR\",\n \"description\": \"No Error\",\n \"permanent\": false\n },\n \"callbackData\":\"There's no place like home.\"\n },\n {\n \"bulkId\": \"BULK-ID-123-xyz\",\n \"messageId\": \"MESSAGE-ID-123-xyz\",\n \"to\": \"41793026727\",\n \"sentAt\": \"2015-06-04T13:01:52.937+0000\",\n \"doneAt\": \"2015-06-04T13:02:01.204+0000\",\n \"smsCount\": 1,\n \"price\": {\n \"pricePerMessage\": 0.0001000000,\n \"currency\": \"EUR\"\n },\n \"status\": {\n \"groupId\": 3,\n \"groupName\": \"DELIVERED\",\n \"id\": 5,\n \"name\": \"DELIVERED_TO_HANDSET\",\n \"description\": \"Message delivered to handset\"\n },\n \"error\": {\n \"groupId\": 0,\n \"groupName\": \"OK\",\n \"id\": 0,\n \"name\": \"NO_ERROR\",\n \"description\": \"No Error\",\n \"permanent\": false\n },\n \"callbackData\":\"There's no place like home.\"\n }\n ]\n}", "language": "json" } ] } [/block] # Delivery report push retry cycle If your Notify URL is unavailable for any reason, forward attempts will be made according to formula: `1min + (1min * <retryNumber/> * <retryNumber/>)`. Examples for first few retry attempts are shown in the table below. Maximum number of retries is 20, i.e. the last retry will be done 41:30h after the initial one. If your URL is not available for the entire time, delivery reports will be lost and the only way you'll be able to get them is by [Getting SMS logs](doc:sms-logs). [block:parameters] { "data": { "h-0": "Retry number", "h-1": "Interval", "h-2": "Cumulative", "0-0": "**0**", "0-1": "01min", "0-2": "00:01h", "1-0": "**1**", "1-1": "02min", "1-2": "00:03h", "2-0": "**2**", "2-1": "05min", "2-2": "00:08h", "3-0": "**3**", "3-1": "10min", "3-2": "00:18h", "4-0": "**4**", "5-0": "**5**", "4-1": "17min", "5-1": "26min", "6-1": "37min", "4-2": "00:35h", "5-2": "01:01h", "6-2": "01:38h", "6-0": "**6**" }, "cols": 3, "rows": 7 } [/block] ----------- #### **Tip:** Find out the difference between [Delivery reports and Message logs](doc:logs-vs-delivery-reports).
			Node:
			(type) c
			(layer)1
				Element:footer
			Node:
			(type) c
			(layer)1
												Node:
												(type) c
												(layer)4
													Element:h4
														Subscribe to our newsletter
												Node:
												(type) c
												(layer)4
													Element:noscript
												Node:
												(type) c
												(layer)4
													Element:noscript
